import{r as e,a as s,u as t,b as a,c as i,d as n,R as r,B as o}from"./vendor-ENQekaI9.js";import{R as l,a as c,b as d,c as m,d as h,e as p,f as x,g as u,h as g,i as j,j as v,k as y,l as b,m as f,n as w,o as N,p as S,q as C,r as k,s as E,t as I,u as L,v as P,w as M,x as A,y as R,z as $,A as O,B as T,C as D,D as U,E as z,F as _}from"./icons-CPDB86Rv.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var G={exports:{}},q={},Y=e,F=Symbol.for("react.element"),J=Symbol.for("react.fragment"),B=Object.prototype.hasOwnProperty,H=Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W={key:!0,ref:!0,__self:!0,__source:!0};function X(e,s,t){var a,i={},n=null,r=null;for(a in void 0!==t&&(n=""+t),void 0!==s.key&&(n=""+s.key),void 0!==s.ref&&(r=s.ref),s)B.call(s,a)&&!W.hasOwnProperty(a)&&(i[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===i[a]&&(i[a]=s[a]);return{$$typeof:F,type:e,key:n,ref:r,props:i,_owner:H.current}}q.Fragment=J,q.jsx=X,q.jsxs=X,G.exports=q;var V=G.exports,K={},Q=s;K.createRoot=Q.createRoot,K.hydrateRoot=Q.hydrateRoot;const Z="https://temporary-mail-backend.vercel.app/".replace(/\/+$/,""),ee={async createMailbox(){try{const e=await fetch(`${Z}/api/mailboxes`,{method:"POST"});if(!e.ok){const s=await e.text();let t="Unable to create mailbox";try{const e=JSON.parse(s);t=(null==e?void 0:e.error)||(null==e?void 0:e.message)||t}catch{t=s||t}const a=new Error(t);throw a.status=e.status,a}return e.json()}catch(e){if(e instanceof Error)throw e;throw new Error("Network error. Please check your connection and try again.")}},async getMessages(e){try{const s=await fetch(`${Z}/api/mailboxes/${e}/messages`);if(!s.ok){const e=await s.text();let t="Unable to load inbox";try{const s=JSON.parse(e);t=(null==s?void 0:s.error)||(null==s?void 0:s.message)||t}catch{t=e||t}const a=new Error(t);throw a.status=s.status,a}return s.json()}catch(s){if(s instanceof Error)throw s;throw new Error("Network error. Please check your connection and try again.")}},async extendMailbox(e){try{const s=await fetch(`${Z}/api/mailboxes/${e}/extend`,{method:"POST"});if(!s.ok){const e=await s.text();let t="Unable to extend mailbox";try{const s=JSON.parse(e);t=(null==s?void 0:s.error)||(null==s?void 0:s.message)||t}catch{t=e||t}const a=new Error(t);throw a.status=s.status,a}return s.json()}catch(s){if(s instanceof Error)throw s;throw new Error("Network error. Please check your connection and try again.")}}},se="tempMail_user";function te(){try{const e=localStorage.getItem(se);return e?JSON.parse(e):null}catch{return null}}function ae(e){const s=te();if(!s)return null;const t={...s,...e};return localStorage.setItem(se,JSON.stringify(t)),t}const ie=e=>{const s=new Date(e).getTime()-Date.now();if(s<=0)return"expired";return`${Math.floor(s/6e4)}m ${Math.floor(s%6e4/1e3).toString().padStart(2,"0")}s`};function ne({user:s,emailAddress:i,mailbox:n,onGenerate:r,onRefresh:o,isRefreshing:f,isGenerating:w,canRefresh:N,onShowHistory:S,onLogout:C,onShowLogin:k,onShowSignup:E,onShowSaveLogin:I,onShowProfile:L}){const P=t();a();const[M,A]=e.useState({copied:!1}),[R,$]=e.useState("--"),[O,T]=e.useState(!1),[D,U]=e.useState(!1),z=e.useRef(null),_=e.useRef(null);e.useEffect(()=>{if(!n)return void $("--");const e=()=>{$(ie(n.expiresAt))};e();const s=setInterval(e,1e3);return()=>clearInterval(s)},[n]);e.useEffect(()=>{const e=e=>{z.current&&!z.current.contains(e.target)&&T(!1),_.current&&!_.current.contains(e.target)&&U(!1)};return(O||D)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[O,D]);return V.jsxs("header",{className:"topbar",children:[V.jsxs("div",{className:"topbar-left",children:[V.jsx("div",{className:"logo-circle",children:V.jsx(l,{})}),V.jsxs("div",{className:"topbar-title",children:[V.jsx("h1",{children:"Temporary Mail"}),V.jsx("p",{children:"Disposable inbox with mail layout after the refresh the page the mail will be changed"})]})]}),V.jsxs("div",{className:"topbar-center",children:[V.jsxs("div",{className:"search-bar fake-search",children:[V.jsx("div",{className:"search-content",children:w&&!i?V.jsxs("span",{className:"search-placeholder","data-tutorial":"email-address",style:{display:"flex",alignItems:"center",gap:"8px"},children:[V.jsx(c,{spin:!0}),V.jsx("span",{children:"Generating mail..."})]}):V.jsx("span",{className:"search-placeholder","data-tutorial":"email-address",children:i||"No address generated"})}),i&&V.jsxs("button",{className:"search-copy-btn",onClick:async()=>{if(i)try{await navigator.clipboard.writeText(i),A({copied:!0}),setTimeout(()=>{A({copied:!1})},1500)}catch{alert("Clipboard copy failed")}},title:M.copied?"Copied!":"Copy address",children:[M.copied?V.jsx(d,{}):V.jsx(m,{}),V.jsx("span",{children:M.copied?"Copied!":"Copy"})]})]}),i&&"--"!==R&&V.jsxs("span",{className:"expiry-time","data-tutorial":"expiry-time",children:["Expires: ",R]})]}),V.jsxs("div",{className:"topbar-right",children:[V.jsxs("button",{className:"primary",onClick:r,disabled:w,"data-tutorial":"generate-btn",children:[w?V.jsx(c,{spin:!0}):V.jsx(h,{}),V.jsx("span",{children:w?"Generating...":"Generate Mail"})]}),V.jsx("button",{className:"secondary",onClick:o,disabled:!N||f,title:f?"Refreshing...":"Refresh","data-tutorial":"refresh-btn",children:f?V.jsx(c,{spin:!0}):V.jsx(h,{})}),V.jsxs("div",{className:"settings-container",ref:z,children:[V.jsx("button",{className:"secondary",onClick:()=>T(!O),title:"Settings",children:V.jsx(p,{})}),O&&V.jsxs("div",{className:"settings-dropdown",children:[V.jsxs("button",{className:"settings-item",onClick:()=>{T(!1),S&&S()},children:[V.jsx(x,{}),V.jsx("span",{children:"History"})]}),V.jsxs("button",{className:"settings-item",onClick:()=>{T(!1),P("/api-docs")},children:[V.jsx(u,{}),V.jsx("span",{children:"API Docs"})]}),V.jsxs("button",{className:"settings-item",onClick:()=>{T(!1),I&&I()},children:[V.jsx(g,{}),V.jsx("span",{children:"Save Mail Details"})]})]})]}),!s&&V.jsx(V.Fragment,{children:V.jsxs("button",{className:"secondary login-btn",onClick:()=>{T(!1),k&&k()},children:[V.jsx(j,{}),V.jsx("span",{children:"Login"})]})}),s&&V.jsxs("div",{className:"settings-container",ref:_,children:[V.jsx("button",{className:"secondary user-btn",onClick:()=>{U(!D),T(!1)},style:{position:"relative"},children:(null==s?void 0:s.avatar)?V.jsx("img",{src:s.avatar,alt:"Avatar",style:{width:"20px",height:"20px",borderRadius:"50%",objectFit:"cover"}}):V.jsx(v,{})}),D&&V.jsxs("div",{className:"settings-dropdown",children:[V.jsxs("button",{className:"settings-item",onClick:()=>{U(!1),L&&L()},children:[V.jsx(y,{}),V.jsx("span",{children:"Profile"})]}),V.jsxs("button",{className:"settings-item",onClick:()=>{U(!1),C&&C()},children:[V.jsx(b,{}),V.jsx("span",{children:"Logout"})]})]})]})]})]})}const re=[{id:"generate",title:"Generate Email Address",description:'Click on "Generate Email" button to create a temporary email address. This address will be used to receive emails.',target:"generate-btn",position:"bottom"},{id:"address",title:"Your Email Address",description:"This is your temporary email address. You can copy it and use it anywhere to receive emails. Click the copy button to copy the address.",target:"email-address",position:"bottom"},{id:"expiry",title:"Expiry Time",description:"This shows when your email address will expire. After expiry, you won't be able to receive new emails on this address.",target:"expiry-time",position:"top"},{id:"refresh",title:"Refresh Button",description:"Click this button to manually refresh and check for new emails. The inbox also auto-refreshes every 6 seconds.",target:"refresh-btn",position:"bottom"},{id:"inbox",title:"Inbox Section",description:"All your received emails will appear here. Click on any email to view its full content in the preview panel.",target:"inbox-section",position:"right"},{id:"preview",title:"Message Preview",description:"When you click on an email, its full content will be displayed here. You can read the complete message, including HTML content.",target:"detail-panel",position:"left"}];function oe({onComplete:s}){const[t,a]=e.useState(0),[i,n]=e.useState(!1),r=e.useRef(null),o=e.useRef(null);e.useEffect(()=>(localStorage.getItem("tempMail_tutorial_completed")||(n(!0),document.body.classList.add("tutorial-active")),()=>{document.body.classList.remove("tutorial-active")}),[]),e.useEffect(()=>{if(!i)return;document.querySelectorAll("[data-tutorial]").forEach(e=>{e.classList.remove("tutorial-highlight")});const e=()=>{const e=re[t],s=document.querySelector(`[data-tutorial="${e.target}"]`);s&&o.current&&r.current&&(s.classList.add("tutorial-highlight"),s.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),setTimeout(()=>{l(s,o.current,e.position)},300))};return setTimeout(e,100),window.addEventListener("scroll",e,!0),window.addEventListener("resize",e),()=>{document.querySelectorAll("[data-tutorial]").forEach(e=>{e.classList.remove("tutorial-highlight")}),window.removeEventListener("scroll",e,!0),window.removeEventListener("resize",e)}},[t,i]);const l=(e,s,t)=>{const a=e.getBoundingClientRect(),i=s.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop;e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"});let l=0,c=0;"bottom"===t?(l=a.bottom+o+16,c=a.left+n+a.width/2,s.style.transform="translateX(-50%)"):"top"===t?(l=a.top+o-i.height-16,c=a.left+n+a.width/2,s.style.transform="translateX(-50%)"):"right"===t?(l=a.top+o+a.height/2,c=a.right+n+16,s.style.transform="translateY(-50%)"):"left"===t&&(l=a.top+o+a.height/2,c=a.left+n-i.width-16,s.style.transform="translate(-100%, -50%)");const d=20;if(l<d&&(l=d),l+i.height>window.innerHeight-d&&(l=window.innerHeight-i.height-d),c<d&&(c=d),c+i.width>window.innerWidth-d&&(c=window.innerWidth-i.width-d),s.style.top=`${l}px`,s.style.left=`${c}px`,r.current){const s=r.current,t=e.getBoundingClientRect(),a=10,i=Math.max(0,t.left-a),n=Math.max(0,t.top-a),o=Math.min(window.innerWidth,t.right+a),l=Math.min(window.innerHeight,t.bottom+a);s.style.clipPath=`polygon(\n        0% 0%, \n        0% 100%, \n        ${i}px 100%, \n        ${i}px ${n}px, \n        ${o}px ${n}px, \n        ${o}px ${l}px, \n        ${i}px ${l}px, \n        ${i}px 100%, \n        100% 100%, \n        100% 0%\n      )`}},c=()=>{localStorage.setItem("tempMail_tutorial_completed","true"),document.body.classList.remove("tutorial-active"),n(!1),s&&s()};if(!i)return null;const d=re[t],m=0===t,h=t===re.length-1;return V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"tutorial-overlay",ref:r}),V.jsxs("div",{className:"tutorial-tooltip",ref:o,children:[V.jsxs("div",{className:"tutorial-header",children:[V.jsx("h3",{children:d.title}),V.jsx("button",{className:"tutorial-close",onClick:()=>{c()},title:"Skip tutorial",children:V.jsx(f,{})})]}),V.jsx("p",{className:"tutorial-description",children:d.description}),V.jsxs("div",{className:"tutorial-footer",children:[V.jsxs("div",{className:"tutorial-progress",children:["Step ",t+1," of ",re.length]}),V.jsxs("div",{className:"tutorial-actions",children:[!m&&V.jsxs("button",{className:"tutorial-btn secondary",onClick:()=>{t>0&&a(t-1)},children:[V.jsx(w,{}),"Previous"]}),V.jsx("button",{className:"tutorial-btn primary",onClick:()=>{t<re.length-1?a(t+1):c()},children:h?"Got it!":V.jsxs(V.Fragment,{children:["Next",V.jsx(N,{})]})})]})]})]})]})}function le({messages:e,selectedMessageId:s,onSelectMessage:t,hasMailbox:a,readMessages:i}){return V.jsxs("section",{className:"inbox-section","data-tutorial":"inbox-section",children:[V.jsxs("div",{className:"section-header",children:[V.jsxs("h2",{children:[V.jsx(l,{className:"header-icon"}),"Inbox"]}),V.jsx("p",{className:"inbox-hint",children:"Send an mail to the address on the left, then click Refresh."})]}),a||e.length?e.length>0?V.jsx("div",{className:"inbox-list",children:e.map(e=>V.jsxs("article",{className:"message-card "+(s===e.id?"active":""),onClick:()=>t(e.id),children:[V.jsxs("div",{className:"message-header",children:[V.jsxs("div",{className:"message-subject-wrapper",children:[!i.has(e.id)&&V.jsx("span",{className:"message-unread-dot",title:"Unread"}),V.jsx("p",{className:"subject",children:e.subject})]}),V.jsxs("p",{className:"meta",children:[e.from," â€¢ ",new Date(e.receivedAt).toLocaleString()]})]}),V.jsx("p",{className:"body",children:e.body||"(no preview)"})]},e.id))}):null:V.jsxs("div",{className:"inbox-list empty",children:[V.jsx(l,{className:"empty-icon"}),V.jsx("p",{children:"No messages yet. Share the address and refresh after sending an mail."})]})]})}function ce({message:s}){const t=e.useRef(null);return e.useEffect(()=>{t.current&&(s?(t.current.style.backgroundColor="white",t.current.style.color="#000000",setTimeout(()=>{var e;if(t.current)if(s.html){const a=((e="")=>e?e.replace(/<script[\s\S]*?>[\s\S]*?<\/script>/gi,"").replace(/on\w+="[^"]*"/gi,"").replace(/on\w+='[^']*'/gi,"").replace(/<style[\s\S]*?>[\s\S]*?<\/style>/gi,"").replace(/\s*style\s*=\s*["'][^"']*["']/gi,"").replace(/\s*bgcolor\s*=\s*["'][^"']*["']/gi,"").replace(/\s*background\s*=\s*["'][^"']*["']/gi,""):"")(s.html);t.current.innerHTML=a,(e=t.current)&&e.querySelectorAll("a[href]").forEach(e=>{e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer")});t.current.querySelectorAll("a[href]").forEach(e=>{const s=(e.textContent||e.href).trim().toLowerCase();/verify|confirm|activate|validate|click here|get started/i.test(s)&&e.classList.add("verify-link-button")});t.current.querySelectorAll("*").forEach(e=>{e.style.backgroundColor="transparent",e.style.background="transparent",e.style.color="#000000",e.style.bgcolor="",e.classList&&e.classList.forEach(s=>{(s.includes("bg-")||s.includes("text-")||s.includes("dark"))&&e.classList.remove(s)})}),t.current.style.backgroundColor="white",t.current.style.color="#000000"}else s.body?t.current.textContent=s.body:t.current.textContent="(no content)"},100)):t.current.innerHTML="")},[s]),V.jsxs("section",{className:"detail-panel","data-tutorial":"detail-panel",children:[V.jsxs("header",{className:"detail-header",children:[V.jsxs("div",{children:[V.jsx("p",{className:"label",children:"Selected message"}),s?V.jsx("h3",{children:s.subject}):V.jsx("h3",{className:"detail-empty-title",children:"No message selected"})]}),s&&V.jsxs("div",{className:"detail-meta",children:[V.jsx("p",{children:s.from}),V.jsx("p",{children:new Date(s.receivedAt).toLocaleString()})]})]}),s?V.jsx("div",{className:"detail-body bg-white text-gray-900",ref:t,onClick:e=>{const s=e.target.closest("a[href]");s&&(e.preventDefault(),window.open(s.href,"_blank","noopener"))}}):V.jsxs("div",{className:"detail-body detail-body-empty",children:[V.jsx(l,{className:"detail-empty-icon"}),V.jsx("p",{className:"detail-empty-message",children:"Select a message from the inbox to view its content"}),V.jsxs("p",{className:"detail-empty-message",children:["Or click on the ",V.jsx("span",{className:"font-bold",children:'"Generate Mail"'})," button to create a temporary mail."]}),V.jsx("p",{className:"detail-empty-message",children:"Or send an mail to the address on the left, then click Refresh."})]})]})}function de({isOpen:s,onClose:t}){const[a,i]=e.useState([]),[n,r]=e.useState({});e.useEffect(()=>{s&&o()},[s]);const o=()=>{try{const e=localStorage.getItem("tempMail_history");if(e){const s=JSON.parse(e).sort((e,s)=>new Date(s.createdAt)-new Date(e.createdAt));i(s)}else i([])}catch(e){i([])}};return s?V.jsx("div",{className:"history-modal-overlay",onClick:t,children:V.jsxs("div",{className:"history-modal",onClick:e=>e.stopPropagation(),children:[V.jsxs("div",{className:"history-modal-header",children:[V.jsx("h2",{children:"Mail History"}),V.jsx("button",{className:"history-close-btn",onClick:t,children:V.jsx(f,{})})]}),V.jsx("div",{className:"history-modal-content",children:0===a.length?V.jsx("div",{className:"history-empty",children:V.jsx("p",{children:"No mail history found."})}):V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"history-actions",children:V.jsxs("button",{className:"history-clear-btn",onClick:()=>{window.confirm("Are you sure you want to clear all history?")&&(localStorage.removeItem("tempMail_history"),i([]))},children:[V.jsx(S,{}),"Clear All"]})}),V.jsx("div",{className:"history-list",children:a.map(e=>V.jsxs("div",{className:"history-item",children:[V.jsxs("div",{className:"history-item-content",children:[V.jsxs("div",{className:"history-item-address",children:[V.jsx("span",{className:"history-email",children:e.address}),V.jsx("button",{className:"history-copy-btn",onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),r({[e]:!0}),setTimeout(()=>{r({[e]:!1})},1500)}catch{alert("Clipboard copy failed")}})(e.address),title:n[e.address]?"Copied!":"Copy address",children:n[e.address]?V.jsx(d,{}):V.jsx(m,{})})]}),V.jsxs("div",{className:"history-item-meta",children:[V.jsxs("span",{className:"history-date",children:["Created: ",new Date(e.createdAt).toLocaleString()]}),e.expiresAt&&V.jsxs("span",{className:"history-expiry",children:["Expired: ",new Date(e.expiresAt)<new Date?"Yes":ie(e.expiresAt)]})]})]}),V.jsx("button",{className:"history-delete-btn",onClick:()=>(e=>{try{const s=localStorage.getItem("tempMail_history");if(s){const t=JSON.parse(s).filter(s=>s.mailboxId!==e);localStorage.setItem("tempMail_history",JSON.stringify(t)),o()}}catch(s){}})(e.mailboxId),title:"Delete",children:V.jsx(S,{})})]},e.mailboxId))})]})})]})}):null}function me({isOpen:s,onClose:t,onLogin:a,onSwitchToSignup:i}){const[n,r]=e.useState(""),[o,c]=e.useState(""),[d,m]=e.useState(!1),[h,p]=e.useState(""),[x,u]=e.useState(!1);if(!s)return null;const g=()=>{r(""),c(""),p(""),t()};return V.jsx("div",{className:"login-modal-overlay",onClick:g,children:V.jsxs("div",{className:"login-modal",onClick:e=>e.stopPropagation(),children:[V.jsxs("div",{className:"login-modal-header",children:[V.jsxs("div",{className:"login-header-content",children:[V.jsx("div",{className:"logo-circle",children:V.jsx(l,{})}),V.jsxs("div",{children:[V.jsx("h2",{children:"Sign In"}),V.jsx("p",{children:"Sign in to manage your disposable inbox."})]})]}),V.jsx("button",{className:"login-close-btn",onClick:g,children:V.jsx(f,{})})]}),V.jsxs("form",{className:"login-form",onSubmit:e=>{if(e.preventDefault(),p(""),n.trim()&&o.trim())if(n.includes("@")){u(!0);try{const e=function({email:e,password:s}){const t=te(),a={email:e,password:s||(null==t?void 0:t.password),avatar:null==t?void 0:t.avatar};return localStorage.setItem(se,JSON.stringify(a)),a}({email:n.trim(),password:o.trim()});a&&a(e),r(""),c(""),p(""),t()}catch(s){p("Something went wrong. Please try again."),u(!1)}}else p("Please enter a valid email address.");else p("Email and password are required.")},children:[V.jsxs("label",{className:"login-label",children:[V.jsxs("span",{children:[V.jsx(v,{})," Email"]}),V.jsx("input",{type:"email",value:n,onChange:e=>r(e.target.value),placeholder:"you@example.com"})]}),V.jsxs("label",{className:"login-label",children:[V.jsxs("span",{children:[V.jsx(C,{})," Password"]}),V.jsxs("div",{style:{position:"relative",width:"100%"},children:[V.jsx("input",{type:d?"text":"password",value:o,onChange:e=>c(e.target.value),placeholder:"Enter any password",style:{paddingRight:"40px",width:"100%"}}),V.jsx("button",{type:"button",onClick:()=>m(!d),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",zIndex:1},onMouseEnter:e=>e.target.style.color="var(--primary)",onMouseLeave:e=>e.target.style.color="var(--text-secondary)",children:d?V.jsx(k,{}):V.jsx(E,{})})]})]}),h&&V.jsx("div",{className:"login-error",children:h}),V.jsx("button",{className:"primary login-submit",type:"submit",disabled:x,children:x?"Signing in...":"Sign in"}),V.jsxs("p",{className:"login-hint",children:["Use any email and password to continue."," ",V.jsx("span",{className:"text-primary font-bold text-[14px] cursor-pointer hover:underline hover:text-primary-hover transition-all duration-300",onClick:e=>{e.preventDefault(),i&&i()},children:"Sign up"})]})]})]})})}function he({isOpen:s,onClose:t,onSignup:a,onSwitchToLogin:i}){const[n,r]=e.useState(""),[o,c]=e.useState(""),[d,m]=e.useState(""),[h,p]=e.useState(!1),[x,u]=e.useState(!1),[g,j]=e.useState(""),[y,b]=e.useState(!1);if(!s)return null;const w=()=>{r(""),c(""),m(""),j(""),t()};return V.jsx("div",{className:"login-modal-overlay",onClick:w,children:V.jsxs("div",{className:"login-modal",onClick:e=>e.stopPropagation(),children:[V.jsxs("div",{className:"login-modal-header",children:[V.jsxs("div",{className:"login-header-content",children:[V.jsx("div",{className:"logo-circle",children:V.jsx(l,{})}),V.jsxs("div",{children:[V.jsx("h2",{children:"Sign Up"}),V.jsx("p",{children:"Create an account to manage your disposable inbox."})]})]}),V.jsx("button",{className:"login-close-btn",onClick:w,children:V.jsx(f,{})})]}),V.jsxs("form",{className:"login-form",onSubmit:e=>{if(e.preventDefault(),j(""),n.trim()&&o.trim()&&d.trim())if(n.includes("@"))if(o===d)if(o.length<6)j("Password must be at least 6 characters long.");else{b(!0);try{const e=function({email:e,password:s}){const t={email:e,password:s,avatar:null};return localStorage.setItem(se,JSON.stringify(t)),t}({email:n.trim(),password:o});a&&a(e),r(""),c(""),m(""),j(""),t()}catch(s){j("Something went wrong. Please try again."),b(!1)}}else j("Passwords do not match.");else j("Please enter a valid email address.");else j("All fields are required.")},children:[V.jsxs("label",{className:"login-label",children:[V.jsxs("span",{children:[V.jsx(v,{})," Email"]}),V.jsx("input",{type:"email",value:n,onChange:e=>r(e.target.value),placeholder:"you@example.com"})]}),V.jsxs("label",{className:"login-label",children:[V.jsxs("span",{children:[V.jsx(C,{})," Password"]}),V.jsxs("div",{style:{position:"relative",width:"100%"},children:[V.jsx("input",{type:h?"text":"password",value:o,onChange:e=>c(e.target.value),placeholder:"Enter a password (min 6 characters)",style:{paddingRight:"40px",width:"100%"}}),V.jsx("button",{type:"button",onClick:()=>p(!h),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",zIndex:1},onMouseEnter:e=>e.target.style.color="var(--primary)",onMouseLeave:e=>e.target.style.color="var(--text-secondary)",children:h?V.jsx(k,{}):V.jsx(E,{})})]})]}),V.jsxs("label",{className:"login-label",children:[V.jsxs("span",{children:[V.jsx(C,{})," Confirm Password"]}),V.jsxs("div",{style:{position:"relative",width:"100%"},children:[V.jsx("input",{type:x?"text":"password",value:d,onChange:e=>m(e.target.value),placeholder:"Confirm your password",style:{paddingRight:"40px",width:"100%"}}),V.jsx("button",{type:"button",onClick:()=>u(!x),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",zIndex:1},onMouseEnter:e=>e.target.style.color="var(--primary)",onMouseLeave:e=>e.target.style.color="var(--text-secondary)",children:x?V.jsx(k,{}):V.jsx(E,{})})]})]}),g&&V.jsx("div",{className:"login-error",children:g}),V.jsx("button",{className:"primary login-submit",type:"submit",disabled:y,children:y?"Creating account...":"Sign up"}),V.jsxs("p",{className:"login-hint",children:["Sign up with any email and password to continue."," ","Already have an account?"," ",V.jsx("span",{className:"text-primary font-bold text-[14px] cursor-pointer hover:underline hover:text-primary-hover transition-all duration-300",onClick:e=>{e.preventDefault(),i&&i()},children:"Sign in"})]})]})]})})}function pe({isOpen:s,onClose:t,user:a,onUpdate:i}){var n,r;const[o,l]=e.useState(""),[c,d]=e.useState(""),[m,h]=e.useState(""),[p,x]=e.useState(!1),[u,g]=e.useState(!1),[j,y]=e.useState(!1),[b,w]=e.useState(""),[N,S]=e.useState(""),[L,P]=e.useState(""),[M,A]=e.useState(!1),R=e.useRef(null);if(e.useEffect(()=>{s&&a&&w((null==a?void 0:a.avatar)||"")},[s,a]),!s)return null;const $=()=>{var e;null==(e=R.current)||e.click()},O=()=>{l(""),d(""),h(""),S(""),P(""),t()};return V.jsx("div",{className:"login-modal-overlay",onClick:O,children:V.jsxs("div",{className:"login-modal",onClick:e=>e.stopPropagation(),children:[V.jsxs("div",{className:"login-modal-header",children:[V.jsxs("div",{className:"login-header-content",children:[V.jsx("div",{className:"logo-circle",children:V.jsx(v,{})}),V.jsxs("div",{children:[V.jsx("h2",{children:"Profile Settings"}),V.jsx("p",{children:"Manage your profile and password"})]})]}),V.jsx("button",{className:"login-close-btn",onClick:O,children:V.jsx(f,{})})]}),V.jsxs("div",{className:"login-form",style:{gap:"24px"},children:[V.jsxs("div",{children:[V.jsx("label",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"8px",display:"block"},children:"Profile Avatar"}),V.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[V.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",overflow:"hidden",border:"2px solid var(--border-subtle)",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-secondary)",cursor:"pointer",position:"relative"},onClick:$,children:[b?V.jsx("img",{src:b,alt:"Avatar",style:{width:"100%",height:"100%",objectFit:"cover"}}):V.jsx(v,{style:{fontSize:"40px",color:"var(--text-secondary)"}}),V.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white"},children:V.jsx(I,{style:{fontSize:"12px",color:"white"}})})]}),V.jsxs("div",{children:[V.jsxs("button",{type:"button",className:"secondary",onClick:$,style:{marginBottom:"4px"},children:[V.jsx(I,{}),V.jsx("span",{children:"Change Avatar"})]}),V.jsx("p",{style:{fontSize:"11px",color:"var(--text-secondary)",margin:0},children:"Click to upload a new avatar image"})]}),V.jsx("input",{ref:R,type:"file",accept:"image/*",onChange:e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];if(!t)return;if(!t.type.startsWith("image/"))return void S("Please select an image file.");if(t.size>5242880)return void S("Image size should be less than 5MB.");const a=new FileReader;a.onloadend=()=>{w(a.result),S(""),P("Avatar updated successfully!"),setTimeout(()=>P(""),3e3)},a.onerror=()=>{S("Failed to read image file.")},a.readAsDataURL(t)},style:{display:"none"}})]})]}),V.jsxs("div",{children:[V.jsx("label",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"8px",display:"block"},children:(null==(n=te())?void 0:n.password)?"Change Password":"Set Password"}),V.jsxs("form",{onSubmit:e=>{e.preventDefault(),S(""),P("");const s=te(),t=null==s?void 0:s.password;if(t){if(!o.trim()||!c.trim()||!m.trim())return void S("All password fields are required.");if(o!==s.password)return void S("Current password is incorrect.")}else if(!c.trim()||!m.trim())return void S("New password fields are required.");if(c===m)if(c.length<6)S("New password must be at least 6 characters long.");else if(t&&o===c)S("New password must be different from current password.");else{A(!0);try{const e=ae({password:c});P("Password updated successfully!"),l(""),d(""),h(""),i&&i(e),setTimeout(()=>P(""),3e3)}catch(a){S("Something went wrong. Please try again.")}finally{A(!1)}}else S("New passwords do not match.")},style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(null==(r=te())?void 0:r.password)&&V.jsxs("label",{className:"login-label",children:[V.jsxs("span",{children:[V.jsx(C,{})," Current Password"]}),V.jsxs("div",{style:{position:"relative",width:"100%"},children:[V.jsx("input",{type:p?"text":"password",value:o,onChange:e=>l(e.target.value),placeholder:"Enter current password",style:{paddingRight:"40px",width:"100%"}}),V.jsx("button",{type:"button",onClick:()=>x(!p),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",zIndex:1},onMouseEnter:e=>e.target.style.color="var(--primary)",onMouseLeave:e=>e.target.style.color="var(--text-secondary)",children:p?V.jsx(k,{}):V.jsx(E,{})})]})]}),V.jsxs("label",{className:"login-label",children:[V.jsxs("span",{children:[V.jsx(C,{})," New Password"]}),V.jsxs("div",{style:{position:"relative",width:"100%"},children:[V.jsx("input",{type:u?"text":"password",value:c,onChange:e=>d(e.target.value),placeholder:"Enter new password (min 6 characters)",style:{paddingRight:"40px",width:"100%"}}),V.jsx("button",{type:"button",onClick:()=>g(!u),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",zIndex:1},onMouseEnter:e=>e.target.style.color="var(--primary)",onMouseLeave:e=>e.target.style.color="var(--text-secondary)",children:u?V.jsx(k,{}):V.jsx(E,{})})]})]}),V.jsxs("label",{className:"login-label",children:[V.jsxs("span",{children:[V.jsx(C,{})," Confirm New Password"]}),V.jsxs("div",{style:{position:"relative",width:"100%"},children:[V.jsx("input",{type:j?"text":"password",value:m,onChange:e=>h(e.target.value),placeholder:"Confirm new password",style:{paddingRight:"40px",width:"100%"}}),V.jsx("button",{type:"button",onClick:()=>y(!j),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",zIndex:1},onMouseEnter:e=>e.target.style.color="var(--primary)",onMouseLeave:e=>e.target.style.color="var(--text-secondary)",children:j?V.jsx(k,{}):V.jsx(E,{})})]})]}),N&&V.jsx("div",{className:"login-error",children:N}),L&&V.jsx("div",{style:{padding:"8px 12px",backgroundColor:"#d4edda",color:"#155724",borderRadius:"8px",fontSize:"12px"},children:L}),V.jsx("button",{className:"primary login-submit",type:"submit",disabled:M,children:M?"Updating...":"Update Password"})]})]}),b!==((null==a?void 0:a.avatar)||"")&&V.jsx("button",{className:"primary login-submit",onClick:()=>{try{const e=ae({avatar:b});P("Profile updated successfully!"),i&&i(e),setTimeout(()=>P(""),3e3)}catch(e){S("Something went wrong. Please try again.")}},children:"Save Profile Changes"})]})]})})}function xe(){return V.jsx("section",{className:"login-info-section",children:V.jsxs("div",{className:"w-full",children:[V.jsx("header",{className:"flex justify-center mb-10",children:V.jsxs("div",{className:"login-modern-card-header",children:[V.jsx("div",{className:"login-modern-card-icon",children:V.jsx(g,{})}),V.jsxs("div",{className:"login-modern-card-content",children:[V.jsx("h2",{className:"login-modern-card-title",children:"Save your login details safely"}),V.jsx("p",{className:"login-modern-card-text",children:"Keep your Login ID, Password, and Mail written here so you can log in faster next time without remembering everything."})]})]})}),V.jsxs("div",{className:"grid gap-4 md:gap-[0.5rem] md:grid-cols-3",children:[V.jsxs("div",{className:"login-modern-card",children:[V.jsx("div",{className:"login-modern-card-icon-small",children:V.jsx(L,{})}),V.jsx("h3",{className:"login-modern-card-title-small",children:"All your details together"}),V.jsx("p",{className:"login-modern-card-text-small",children:"Store your login ID, password, and email in one secure place so you don't have to search for them again and again."})]}),V.jsxs("div",{className:"login-modern-card",children:[V.jsx("div",{className:"login-modern-card-icon-small",children:V.jsx(L,{})}),V.jsx("h3",{className:"login-modern-card-title-small",children:"Faster next login"}),V.jsxs("p",{className:"login-modern-card-text-small",children:["Next time you visit, your saved details are already here so you can log in with click "," ",V.jsx("span",{className:"text-primary",children:"just a few clicks"}),"."]})]}),V.jsxs("div",{className:"login-modern-card",children:[V.jsx("div",{className:"login-modern-card-icon-small",children:V.jsx(L,{})}),V.jsx("h3",{className:"login-modern-card-title-small",children:"Simple & easy to use"}),V.jsxs("p",{className:"login-modern-card-text-small",children:["Just write your information once and relax, the interface keeps everything",V.jsx("span",{className:"text-primary",children:" clear, tidy, and easy to read."})]})]})]})]})})}function ue({children:s,className:t=""}){const a=e.useRef(null),[i,n]=e.useState({x:50,y:50});return V.jsx("div",{ref:a,className:`login-modern-card color-motion-card ${t}`,onMouseMove:e=>{if(!a.current)return;const s=a.current.getBoundingClientRect(),t=(e.clientX-s.left)/s.width*100,i=(e.clientY-s.top)/s.height*100;n({x:t,y:i})},onMouseLeave:()=>{n({x:50,y:50})},style:{"--mouse-x":`${i.x}%`,"--mouse-y":`${i.y}%`},children:s})}function ge(){return V.jsx("section",{className:"login-info-section",children:V.jsxs("div",{className:"w-full",children:[V.jsx("header",{className:"flex justify-center mb-10",children:V.jsxs("div",{className:"login-modern-card-header",children:[V.jsx("div",{className:"login-modern-card-icon",children:V.jsx(P,{})}),V.jsxs("div",{className:"login-modern-card-content",children:[V.jsx("h2",{className:"login-modern-card-title",children:"Create your account today"}),V.jsx("p",{className:"login-modern-card-text",children:"Sign up now to get started with your disposable email inbox and enjoy all the benefits of a secure, temporary email service."})]})]})}),V.jsxs("div",{className:"grid gap-4 md:gap-[0.5rem] md:grid-cols-3",children:[V.jsxs(ue,{children:[V.jsx("div",{className:"login-modern-card-icon-small",children:V.jsx(L,{})}),V.jsx("h3",{className:"login-modern-card-title-small",children:"Quick setup"}),V.jsx("p",{className:"login-modern-card-text-small",children:"Get started in seconds with a simple signup process. No lengthy forms or complicated verification steps required."})]}),V.jsxs(ue,{children:[V.jsx("div",{className:"login-modern-card-icon-small",children:V.jsx(L,{})}),V.jsx("h3",{className:"login-modern-card-title-small",children:"Secure & private"}),V.jsxs("p",{className:"login-modern-card-text-small",children:["Your account information is kept safe and private. We prioritize your",V.jsx("span",{className:"text-primary",children:" security and privacy"}),"."]})]}),V.jsxs(ue,{children:[V.jsx("div",{className:"login-modern-card-icon-small",children:V.jsx(L,{})}),V.jsx("h3",{className:"login-modern-card-title-small",children:"Full access"}),V.jsxs("p",{className:"login-modern-card-text-small",children:["Unlock all features including email history, saved details, and",V.jsx("span",{className:"text-primary",children:" advanced inbox management"}),"."]})]})]})]})})}const je=[{id:1,title:"Generate Email Address",description:'Click the "Generate Mail" button to create a temporary email address instantly.',icon:V.jsx(h,{}),color:"#1a73e8"},{id:2,title:"Copy Your Address",description:"Copy the generated email address and use it anywhere you need to receive emails.",icon:V.jsx(m,{}),color:"#34a853"},{id:3,title:"Receive Emails",description:"All emails sent to your temporary address will appear in your inbox automatically.",icon:V.jsx(l,{}),color:"#ea4335"},{id:4,title:"View Messages",description:"Click on any email to read its full content. Your inbox refreshes every 6 seconds.",icon:V.jsx(d,{}),color:"#fbbc04"}];function ve(){const[s,t]=e.useState(0),[a,i]=e.useState(!0),[n,r]=e.useState(!0),[o,c]=e.useState({0:!0,1:!0,2:!0,3:!0}),p=e.useRef(null);e.useEffect(()=>{r(!0),je.forEach((e,s)=>{c(e=>({...e,[s]:!0}))})},[]),e.useEffect(()=>{if(!a)return;const e=setInterval(()=>{t(e=>(e+1)%je.length)},3e3);return()=>clearInterval(e)},[a]);return V.jsxs("section",{className:"temp-mail-animation-section",ref:p,children:[V.jsx("div",{className:"animation-bg-particles",children:[...Array(20)].map((e,s)=>V.jsx("div",{className:"animation-particle",style:{left:100*Math.random()+"%",animationDelay:5*Math.random()+"s",animationDuration:3+4*Math.random()+"s"}},s))}),V.jsxs("div",{className:"animation-floating-icons",children:[V.jsx("div",{className:"floating-icon icon-1",children:V.jsx(l,{})}),V.jsx("div",{className:"floating-icon icon-2",children:V.jsx(h,{})}),V.jsx("div",{className:"floating-icon icon-3",children:V.jsx(m,{})}),V.jsx("div",{className:"floating-icon icon-4",children:V.jsx(d,{})})]}),V.jsxs("div",{className:"animation-section-container visible",children:[V.jsxs("header",{className:"animation-section-header fade-in-up",children:[V.jsxs("div",{className:"animation-header-content",children:[V.jsxs("div",{className:"animation-header-icon",children:[V.jsx(M,{className:"icon-sparkle"}),V.jsx(A,{className:"icon-main"})]}),V.jsxs("div",{className:"animation-header-text",children:[V.jsxs("h2",{className:"animation-section-title",children:[V.jsx("span",{className:"title-word word-1",children:"How"}),V.jsx("span",{className:"title-word word-2",children:"to"}),V.jsx("span",{className:"title-word word-3",children:"Use"}),V.jsx("span",{className:"title-word word-4",children:"Temp"}),V.jsx("span",{className:"title-word word-5",children:"Mail"})]}),V.jsx("p",{className:"animation-section-subtitle",children:"Follow these simple steps to get started with temporary email addresses"})]})]}),!a&&V.jsx("button",{className:"animation-play-btn",onClick:()=>{i(!0)},title:"Play animation",children:V.jsx(A,{})})]}),V.jsx("div",{className:"animation-steps-grid",children:je.map((e,a)=>{const n=s===a,r=s>a,l=o[a];return V.jsxs("div",{className:`animation-step-card ${n?"active":""} ${r?"completed":""} ${l?"card-visible":""}`,onClick:()=>(e=>{t(e),i(!1)})(a),style:{"--step-color":e.color},children:[V.jsx("div",{className:"card-shimmer"}),n&&V.jsx("div",{className:"card-glow",style:{boxShadow:`0 0 30px ${e.color}40`}}),V.jsxs("div",{className:"animation-step-number",children:[V.jsx("span",{className:"number-text",children:e.id}),n&&V.jsx("div",{className:"number-ripple"})]}),V.jsxs("div",{className:"animation-step-icon "+(n?"icon-active":""),style:{backgroundColor:n||r?e.color:"var(--bg-sidebar)",color:n||r?"#fff":"var(--text-secondary)"},children:[V.jsx("div",{className:"icon-wrapper",children:e.icon}),n&&V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"icon-ring"}),V.jsx("div",{className:"icon-sparkles",children:[...Array(6)].map((e,s)=>V.jsx("span",{className:"sparkle",style:{"--sparkle-delay":.1*s+"s","--sparkle-angle":60*s+"deg"}},s))})]})]}),V.jsxs("div",{className:"animation-step-content",children:[V.jsx("h3",{className:"animation-step-title",children:V.jsx("span",{className:"title-highlight",children:e.title})}),V.jsx("p",{className:"animation-step-description",children:e.description})]}),n&&V.jsx(V.Fragment,{children:V.jsxs("div",{className:"animation-step-indicator",children:[V.jsx("div",{className:"animation-pulse-dot"}),V.jsx("div",{className:"pulse-ring"})]})}),r&&V.jsxs("div",{className:"animation-step-check",children:[V.jsx(d,{}),V.jsx("div",{className:"check-ripple"})]}),a<je.length-1&&V.jsxs("div",{className:"step-connector "+(r?"completed":""),children:[V.jsx("div",{className:"connector-line"}),V.jsx("div",{className:"connector-arrow",children:V.jsx(R,{})})]})]},e.id)})}),V.jsxs("div",{className:"animation-progress-container fade-in-up",children:[V.jsx("div",{className:"animation-progress-bar",children:je.map((e,t)=>V.jsx("div",{className:"animation-progress-dot "+(s>=t?"active":""),style:{backgroundColor:s>=t?je[t].color:"var(--border-subtle)","--dot-color":je[t].color},children:s>=t&&V.jsx("div",{className:"dot-pulse",style:{backgroundColor:je[t].color}})},t))}),V.jsx("div",{className:"animation-progress-line",children:V.jsx("div",{className:"animation-progress-fill",style:{width:(s+1)/je.length*100+"%",background:`linear-gradient(90deg, ${je[0].color}, ${je[1].color}, ${je[2].color}, ${je[3].color})`},children:V.jsx("div",{className:"progress-shimmer"})})}),V.jsxs("div",{className:"progress-label",children:["Step ",s+1," of ",je.length]})]}),V.jsx("div",{className:"animation-arrow-container",children:je.map((e,t)=>V.jsxs("div",{className:"animation-arrow "+(s===t?"visible":""),style:{color:je[t].color,animationDelay:.1*t+"s"},children:[V.jsx(R,{}),V.jsx("div",{className:"arrow-trail"})]},t))})]})]})}const ye={name:"Temp Mail API",version:"1.0.0",description:"RESTful API for temporary email addresses",baseUrl:`${window.location.origin}/api`,endpoints:{health:{method:"GET",path:"/api/health",description:"Check API health status",example:`${window.location.origin}/api/health`,response:{status:"ok",mailboxes:5}},createMailbox:{method:"POST",path:"/api/mailboxes",description:"Create a new temporary email address",example:`${window.location.origin}/api/mailboxes`,requestBody:"None (optional: { domain: 'preferred-domain.com' })",response:{mailboxId:"string",address:"string",domain:"string",createdAt:"ISO8601",expiresAt:"ISO8601",messageCount:"number"}},getMailbox:{method:"GET",path:"/api/mailboxes/:mailboxId",description:"Get mailbox information",example:`${window.location.origin}/api/mailboxes/{mailboxId}`,response:{mailboxId:"string",address:"string",domain:"string",createdAt:"ISO8601",expiresAt:"ISO8601",messageCount:"number"}},getMessages:{method:"GET",path:"/api/mailboxes/:mailboxId/messages",description:"Get all messages for a mailbox",example:`${window.location.origin}/api/mailboxes/{mailboxId}/messages`,response:{mailbox:"object",messages:[{id:"string",from:"string",subject:"string",body:"string",html:"string",receivedAt:"ISO8601"}]}},extendMailbox:{method:"POST",path:"/api/mailboxes/:mailboxId/extend",description:"Extend mailbox expiration time by 15 minutes",example:`${window.location.origin}/api/mailboxes/{mailboxId}/extend`,response:{mailboxId:"string",address:"string",expiresAt:"ISO8601"}}},usage:{javascript:`// Create mailbox\nconst response = await fetch('${window.location.origin}/api/mailboxes', { method: 'POST' });\nconst mailbox = await response.json();\nconsole.log('Email:', mailbox.address);\n\n// Get messages\nconst messagesRes = await fetch(\`${window.location.origin}/api/mailboxes/\${mailbox.mailboxId}/messages\`);\nconst data = await messagesRes.json();\nconsole.log('Messages:', data.messages);\n\n// Poll for new messages\nsetInterval(async () => {\n  const res = await fetch(\`${window.location.origin}/api/mailboxes/\${mailbox.mailboxId}/messages\`);\n  const { messages } = await res.json();\n  console.log('New messages:', messages);\n}, 6000); // Poll every 6 seconds`,curl:`# Create mailbox\ncurl -X POST ${window.location.origin}/api/mailboxes\n\n# Get messages\ncurl ${window.location.origin}/api/mailboxes/{mailboxId}/messages\n\n# Extend mailbox\ncurl -X POST ${window.location.origin}/api/mailboxes/{mailboxId}/extend`,python:`import requests\nimport time\n\n# Create mailbox\nresponse = requests.post('${window.location.origin}/api/mailboxes')\nmailbox = response.json()\nprint(f"Email: {mailbox['address']}")\n\n# Get messages\nmessages = requests.get(\n    f"${window.location.origin}/api/mailboxes/{mailbox['mailboxId']}/messages"\n)\nprint(messages.json())\n\n# Poll for new messages\nwhile True:\n    res = requests.get(\n        f"${window.location.origin}/api/mailboxes/{mailbox['mailboxId']}/messages"\n    )\n    data = res.json()\n    print(f"Messages: {len(data['messages'])}")\n    time.sleep(6)`},notes:["Mailboxes expire after 15 minutes of inactivity","You can extend mailbox lifetime using the extend endpoint","All endpoints support CORS and can be used from any domain","No authentication required - mailboxes are identified by mailboxId"]};function be(){const[s,t]=e.useState(ye),[a,i]=e.useState({}),[n,r]=e.useState("javascript"),[o,l]=e.useState(!1);e.useEffect(()=>{fetch("/api").then(e=>{if(!e.ok)throw new Error("API not available");return e.json()}).then(e=>{t(e),l(!1)}).catch(e=>{l(!0),t(ye)})},[]);const c=async(e,s)=>{try{await navigator.clipboard.writeText(e),i({[s]:!0}),setTimeout(()=>{i({[s]:!1})},1500)}catch{alert("Clipboard copy failed")}};return s?V.jsxs("div",{className:"api-docs",children:[o&&V.jsxs("div",{className:"api-warning",children:[V.jsx($,{}),V.jsxs("div",{children:[V.jsx("strong",{children:"API Server Not Running"}),V.jsx("p",{children:"This documentation shows how to use the API once the server is running."})]})]}),V.jsxs("div",{className:"api-docs-header",children:[V.jsxs("div",{children:[V.jsxs("h1",{children:[V.jsx(O,{})," ",s.name]}),V.jsxs("p",{className:"api-version",children:["Version ",s.version]}),V.jsx("p",{className:"api-description",children:s.description})]}),V.jsxs("div",{className:"api-base-url",children:[V.jsx("strong",{children:"Base URL:"}),V.jsx("code",{children:s.baseUrl}),V.jsx("button",{className:"api-copy-btn",onClick:()=>c(s.baseUrl,"baseUrl"),title:"Copy base URL",children:a.baseUrl?V.jsx(d,{}):V.jsx(m,{})})]})]}),V.jsxs("div",{className:"api-setup-instructions",children:[V.jsx("h2",{children:"ðŸš€ Getting Started"}),V.jsxs("div",{className:"setup-steps",children:[V.jsxs("div",{className:"setup-step",children:[V.jsx("strong",{children:"Step 1: Start the API Server"}),V.jsxs("p",{children:["This starts the Express server on ",V.jsx("code",{children:"http://domain.com:3000"})]})]}),V.jsxs("div",{className:"setup-step",children:[V.jsx("strong",{children:"Step 2: Use the API"}),V.jsx("p",{children:"You can now make API requests to:"}),V.jsx("code",{children:"http://domain.com:3000/api"}),V.jsxs("p",{children:["All ",V.jsx("code",{children:"/api/*"})," requests are automatically proxied to the backend server."]})]}),V.jsxs("div",{className:"setup-step",children:[V.jsx("strong",{children:"Step 3: Test the API"}),V.jsx("p",{children:"Try creating a mailbox:"}),V.jsx("code",{children:"curl -X POST http://domain.com:3000/api/mailboxes"})]})]})]}),V.jsxs("div",{className:"api-endpoints",children:[V.jsx("h2",{children:"API Endpoints"}),Object.entries(s.endpoints).map(([e,s])=>V.jsxs("div",{className:"api-endpoint",children:[V.jsxs("div",{className:"endpoint-header",children:[V.jsx("div",{className:"endpoint-method",children:s.method}),V.jsx("div",{className:"endpoint-path",children:s.path})]}),V.jsx("p",{className:"endpoint-description",children:s.description}),V.jsxs("div",{className:"endpoint-example",children:[V.jsx("strong",{children:"Example:"}),V.jsx("code",{children:s.example}),V.jsx("button",{className:"api-copy-btn",onClick:()=>c(s.example,e),title:"Copy URL",children:a[e]?V.jsx(d,{}):V.jsx(m,{})})]}),s.response&&V.jsxs("div",{className:"endpoint-response",children:[V.jsx("strong",{children:"Response:"}),V.jsx("pre",{children:JSON.stringify(s.response,null,2)})]})]},e))]}),V.jsxs("div",{className:"api-usage",children:[V.jsxs("h2",{children:[V.jsx(u,{})," Usage Examples"]}),V.jsxs("div",{className:"api-tabs",children:[V.jsx("button",{className:"api-tab "+("javascript"===n?"active":""),onClick:()=>r("javascript"),children:"JavaScript"}),V.jsx("button",{className:"api-tab "+("curl"===n?"active":""),onClick:()=>r("curl"),children:"cURL"}),V.jsx("button",{className:"api-tab "+("python"===n?"active":""),onClick:()=>r("python"),children:"Python"})]}),V.jsxs("div",{className:"api-code-block",children:[V.jsxs("div",{className:"code-header",children:[V.jsx("span",{children:"javascript"===n?"JavaScript":"curl"===n?"cURL":"Python"}),V.jsx("button",{className:"api-copy-btn",onClick:()=>c(s.usage[n],`code-${n}`),title:"Copy code",children:a[`code-${n}`]?V.jsx(d,{}):V.jsx(m,{})})]}),V.jsx("pre",{children:V.jsx("code",{children:s.usage[n]})})]})]}),V.jsxs("div",{className:"api-notes",children:[V.jsx("h2",{children:"Important Notes"}),V.jsx("ul",{children:s.notes.map((e,s)=>V.jsx("li",{children:e},s))})]})]}):V.jsx("div",{style:{padding:"20px",textAlign:"center"},children:V.jsx("p",{children:"Loading API documentation..."})})}function fe({isOpen:s,onClose:t}){const[a,i]=e.useState({x:100,y:100}),[n,r]=e.useState(!1),[o,l]=e.useState({x:0,y:0}),[c,d]=e.useState("normal"),[h,p]=e.useState({x:100,y:100}),[x,u]=e.useState({width:420,height:"auto"}),[j,v]=e.useState({email:"",password:"",website:"",notes:""}),[y,b]=e.useState([]),[w,N]=e.useState("add"),[C,I]=e.useState({}),[L,P]=e.useState(null),[M,A]=e.useState(!1),R=e.useRef(null),$=e.useRef(null);e.useEffect(()=>{"saved"===w&&y.length>0&&y.forEach(e=>{if(e.website&&!C[e.id]){const s=(e=>{if(!e)return null;try{let s=e;e.startsWith("http://")||e.startsWith("https://")||(s="https://"+e);return`https://www.google.com/s2/favicons?domain=${new URL(s).hostname}&sz=32`}catch(s){return null}})(e.website);if(s){const t=new Image;t.onload=()=>{I(t=>t[e.id]?t:{...t,[e.id]:s})},t.onerror=()=>{},t.src=s}}})},[w,y.length]),e.useEffect(()=>{if(s){const s=localStorage.getItem("savedLoginDetails");if(s)try{b(JSON.parse(s))}catch(e){}else b([])}},[s,w]);e.useEffect(()=>{if(n){const e=e=>{i({x:e.clientX-o.x,y:e.clientY-o.y})},s=()=>{r(!1)};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",s)}}},[n,o]);const O=e=>{const{name:s,value:t}=e.target;v(e=>({...e,[s]:t}))},G=async(e,s)=>{if(e)try{await navigator.clipboard.writeText(e),alert(`${s} copied to clipboard!`)}catch(t){alert("Failed to copy to clipboard")}};if(!s)return null;const q="minimized"===c,Y="maximized"===c;return V.jsxs(V.Fragment,{children:[q&&V.jsxs("div",{className:"save-login-minimized-indicator",onClick:()=>{d("normal")},title:"Click to restore",children:[V.jsx(g,{}),V.jsx("span",{children:"Login Details"})]}),!q&&V.jsx("div",{className:"save-login-overlay",onClick:t,children:V.jsxs("div",{ref:R,className:"save-login-popup "+(Y?"maximized":""),style:{left:Y?"0":`${a.x}px`,top:Y?"0":`${a.y}px`,width:Y?"100%":x.width,height:Y?"100vh":x.height,cursor:n?"grabbing":"default"},onClick:e=>e.stopPropagation(),children:[V.jsxs("div",{ref:$,className:"save-login-header",onMouseDown:e=>{if(!e.target.closest(".save-login-window-controls")&&"maximized"!==c&&$.current&&$.current.contains(e.target)){r(!0);const s=R.current.getBoundingClientRect();l({x:e.clientX-s.left,y:e.clientY-s.top})}},children:[V.jsxs("div",{className:"save-login-header-left",children:[V.jsx(T,{className:"drag-handle"}),V.jsx(g,{}),V.jsx("span",{children:"Save Login Details"})]}),V.jsxs("div",{className:"save-login-window-controls",children:[V.jsx("button",{className:"save-login-window-btn minimize-btn",onClick:()=>{d("minimized")},title:"Minimize",children:V.jsx(D,{})}),V.jsx("button",{className:"save-login-window-btn maximize-btn",onClick:()=>{var e,s;"maximized"===c?(d("normal"),i(h)):(p(a),u({width:(null==(e=R.current)?void 0:e.offsetWidth)||420,height:(null==(s=R.current)?void 0:s.offsetHeight)||"auto"}),d("maximized"),i({x:0,y:0}))},title:Y?"Restore":"Maximize",children:Y?V.jsx(U,{}):V.jsx(z,{})}),V.jsx("button",{className:"save-login-window-btn close-btn",onClick:e=>{e.stopPropagation(),d("normal"),t()},title:"Close",children:V.jsx(f,{})})]})]}),V.jsxs("div",{className:"save-login-tabs",children:[V.jsx("button",{className:"save-login-tab "+("add"===w?"active":""),onClick:()=>{N("add"),L||v({email:"",password:"",website:"",notes:""})},children:L?"Edit Entry":"Add New"}),V.jsxs("button",{className:"save-login-tab "+("saved"===w?"active":""),onClick:()=>{N("saved"),P(null),v({email:"",password:"",website:"",notes:""})},children:["Saved (",y.length,")"]})]}),V.jsxs("div",{className:"save-login-content",children:["add"===w&&V.jsxs("div",{className:"save-login-form",children:[V.jsxs("div",{className:"save-login-field",children:[V.jsx("label",{children:"Email / Login ID"}),V.jsx("input",{type:"text",name:"email",value:j.email,onChange:O,placeholder:"your@email.com"})]}),V.jsxs("div",{className:"save-login-field",children:[V.jsx("label",{children:"Password"}),V.jsxs("div",{className:"save-login-password-wrapper",children:[V.jsx("input",{type:M?"text":"password",name:"password",value:j.password,onChange:O,placeholder:"Enter password",className:"save-login-password-input"}),V.jsx("button",{type:"button",className:"save-login-password-toggle",onClick:()=>A(!M),title:M?"Hide password":"Show password",children:M?V.jsx(k,{}):V.jsx(E,{})})]})]}),V.jsxs("div",{className:"save-login-field",children:[V.jsx("label",{children:"Website / URL"}),V.jsx("input",{type:"text",name:"website",value:j.website,onChange:O,placeholder:"example.com"})]}),V.jsxs("div",{className:"save-login-field",children:[V.jsx("label",{children:"Notes"}),V.jsx("textarea",{name:"notes",value:j.notes,onChange:O,placeholder:"Additional notes...",rows:"3"})]}),V.jsxs("button",{className:"save-login-save-btn",onClick:()=>{var e;if(!j.email&&!j.website)return void alert("Please enter at least Email or Website");const s={id:L||Date.now(),...j,createdAt:L&&(null==(e=y.find(e=>e.id===L))?void 0:e.createdAt)||(new Date).toISOString()};let t;L?(t=y.map(e=>e.id===L?s:e),P(null)):t=[...y,s],b(t),localStorage.setItem("savedLoginDetails",JSON.stringify(t)),v({email:"",password:"",website:"",notes:""}),N("saved"),alert(L?"Login details updated successfully!":"Login details saved successfully!")},children:[V.jsx(g,{}),L?"Update Details":"Save Details"]})]}),"saved"===w&&V.jsx("div",{className:"save-login-saved",children:0===y.length?V.jsxs("div",{className:"save-login-empty",children:[V.jsx(g,{}),V.jsx("p",{children:"No saved entries yet"}),V.jsx("p",{className:"save-login-empty-hint",children:'Go to "Add New" tab to save your login details'})]}):V.jsx(V.Fragment,{children:V.jsx("div",{className:"save-login-entries",children:y.map(e=>{const s=C[e.id];return V.jsxs("div",{className:"save-login-entry",id:`entry-${e.id}`,children:[V.jsxs("div",{className:"save-login-entry-content",children:[e.website&&V.jsx("div",{className:"save-login-entry-item save-login-website-item",children:s?V.jsxs("div",{className:"save-login-favicon-container",children:[V.jsx("img",{src:C[e.id],alt:e.website,className:"save-login-favicon",title:e.website,onError:e=>{e.target.style.display="none";const s=e.target.parentElement.querySelector(".save-login-website-text");s&&(s.style.display="block")}}),V.jsx("span",{className:"save-login-website-text",style:{display:"none"},children:e.website.length>30?`${e.website.substring(0,30)}...`:e.website})]}):V.jsx("span",{className:"save-login-website-text",title:e.website,children:e.website.length>30?`${e.website.substring(0,30)}...`:e.website})}),e.email&&V.jsxs("div",{className:"save-login-entry-item save-login-email-item",children:[V.jsx("strong",{children:"Email:"}),V.jsx("span",{className:"save-login-truncate",children:e.email.length>25?`${e.email.substring(0,25)}...`:e.email})]}),e.password&&V.jsxs("div",{className:"save-login-entry-item save-login-password-item",children:[V.jsx("strong",{children:"Password:"})," â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"]}),e.notes&&V.jsxs("div",{className:"save-login-entry-item",children:[V.jsx("strong",{children:"Notes:"}),V.jsx("span",{className:"save-login-truncate",children:e.notes.length>40?`${e.notes.substring(0,40)}...`:e.notes})]})]}),V.jsxs("div",{className:"save-login-entry-actions",children:[V.jsxs("div",{className:"save-login-action-buttons",children:[V.jsx("button",{className:"save-login-edit-btn",onClick:()=>(e=>{v({email:e.email||"",password:e.password||"",website:e.website||"",notes:e.notes||""}),P(e.id),N("add")})(e),title:"Edit",children:V.jsx(_,{})}),V.jsx("button",{className:"save-login-delete-btn",onClick:()=>(e=>{if(window.confirm("Are you sure you want to delete this entry?")){const s=y.filter(s=>s.id!==e);b(s),localStorage.setItem("savedLoginDetails",JSON.stringify(s))}})(e.id),title:"Delete",children:V.jsx(S,{})})]}),V.jsxs("div",{className:"save-login-copy-buttons",children:[e.email&&V.jsx("button",{className:"save-login-copy-btn-action save-login-copy-email-btn",onClick:()=>G(e.email,"Email"),onMouseEnter:e=>{var s;null==(s=e.currentTarget.closest(".save-login-entry"))||s.classList.add("hover-email-copy")},onMouseLeave:e=>{var s;null==(s=e.currentTarget.closest(".save-login-entry"))||s.classList.remove("hover-email-copy")},title:"Copy Email",children:V.jsx(m,{})}),e.password&&V.jsx("button",{className:"save-login-copy-btn-action save-login-copy-password-btn",onClick:()=>G(e.password,"Password"),onMouseEnter:e=>{var s;null==(s=e.currentTarget.closest(".save-login-entry"))||s.classList.add("hover-password-copy")},onMouseLeave:e=>{var s;null==(s=e.currentTarget.closest(".save-login-entry"))||s.classList.remove("hover-password-copy")},title:"Copy Password",children:V.jsx(m,{})})]})]})]},e.id)})})})})]})]})})]})}function we({user:s,onLogout:t,onLogin:a}){const[i,n]=e.useState(null),[r,o]=e.useState([]),[l,c]=e.useState(null),[d,m]=e.useState(new Set),[h,p]=e.useState(!1),[x,u]=e.useState(!1),[g,j]=e.useState(!1),[v,y]=e.useState(!1),[b,f]=e.useState(!1),[w,N]=e.useState(!1),[S,C]=e.useState(!1),[k,E]=e.useState(!1),I=r.find(e=>e.id===l),L=e.useCallback(async()=>{if(i){u(!0);try{const{messages:e}=await ee.getMessages(i.mailboxId);if(o(e),!l||!e.find(e=>e.id===l))if(e.length>0){const s=e[0].id;c(s),m(e=>new Set([...e,s]))}else c(null)}catch(e){e.message.includes("404")||e.message.includes("not found")?(alert("Mailbox not found. This usually happens after a server restart. Please generate a new address."),n(null),o([]),c(null)):alert(e.message)}finally{u(!1)}}},[i,l]);e.useEffect(()=>{if(!i)return;const e=setInterval(L,6e3);return()=>clearInterval(e)},[i,L]);return V.jsxs("div",{className:"layout-root",children:[V.jsx(oe,{}),V.jsx(ne,{user:s,emailAddress:null==i?void 0:i.address,mailbox:i,onGenerate:async()=>{p(!0);try{const s=await ee.createMailbox();n(s),o([]),c(null);try{const e=localStorage.getItem("tempMail_history"),t=e?JSON.parse(e):[];t.push({mailboxId:s.mailboxId,address:s.address,createdAt:(new Date).toISOString(),expiresAt:s.expiresAt}),localStorage.setItem("tempMail_history",JSON.stringify(t))}catch(e){}await L()}catch(e){const s=(null==e?void 0:e.message)||"";if(s.includes("All domains are currently rate-limited")||s.includes("Unable to allocate mailbox")||s.includes("Mailbox provider service error")||s.includes("Mailbox provider is temporarily unavailable"))return void alert(`${s}\n\nThe system will automatically retry. Please wait a moment and try again if needed.`);alert(s||"An unexpected error occurred. Please try again.")}finally{p(!1)}},onRefresh:L,isRefreshing:x,isGenerating:h,canRefresh:!!i,onShowHistory:()=>{y(!0)},onLogout:t,onShowLogin:()=>f(!0),onShowSignup:()=>N(!0),onShowProfile:()=>C(!0),onShowSaveLogin:()=>E(!0)}),V.jsx(de,{isOpen:v,onClose:()=>y(!1)}),V.jsx(me,{isOpen:b,onClose:()=>f(!1),onLogin:a,onSwitchToSignup:()=>{f(!1),N(!0)}}),V.jsx(he,{isOpen:w,onClose:()=>N(!1),onSignup:a,onSwitchToLogin:()=>{N(!1),f(!0)}}),V.jsx(pe,{isOpen:S,onClose:()=>C(!1),user:s,onUpdate:e=>{a(e)}}),V.jsx(fe,{isOpen:k,onClose:()=>E(!1)}),V.jsxs("main",{className:"app-main",children:[V.jsx(le,{messages:r,selectedMessageId:l,onSelectMessage:e=>{c(e),m(s=>new Set([...s,e]))},hasMailbox:!!i,readMessages:d}),V.jsx(ce,{message:I})]}),!s&&V.jsx(ge,{}),s&&V.jsx(xe,{}),V.jsx(ve,{})]})}function Ne({user:s,onLogout:a,onLogin:i}){const n=t(),[r,o]=e.useState(!1),[l,c]=e.useState(!1),[d,m]=e.useState(!1);return V.jsxs("div",{className:"layout-root",children:[V.jsx(ne,{user:s,emailAddress:null,mailbox:null,onGenerate:()=>n("/"),onRefresh:()=>{},isRefreshing:!1,canRefresh:!1,onShowHistory:()=>{},onLogout:a,onShowLogin:()=>o(!0),onShowSignup:()=>c(!0),onShowProfile:()=>m(!0),onShowSaveLogin:()=>{}}),V.jsx(me,{isOpen:r,onClose:()=>o(!1),onLogin:i,onSwitchToSignup:()=>{o(!1),c(!0)}}),V.jsx(he,{isOpen:l,onClose:()=>c(!1),onSignup:i,onSwitchToLogin:()=>{c(!1),o(!0)}}),V.jsx(pe,{isOpen:d,onClose:()=>m(!1),user:s,onUpdate:e=>{i(e)}}),V.jsx("main",{className:"api-docs-page",children:V.jsxs("div",{className:"api-docs-container",children:[V.jsx("button",{className:"api-docs-back-btn",onClick:()=>n("/"),children:"â† Back to Home"}),V.jsx(be,{})]})})]})}function Se(){const[s,t]=e.useState(null);e.useEffect(()=>{const e=te();e&&t(e)},[]);const a=e=>{t(e)},r=()=>{localStorage.removeItem(se),t(null)};return V.jsxs(i,{children:[V.jsx(n,{path:"/",element:V.jsx(we,{user:s,onLogout:r,onLogin:a})}),V.jsx(n,{path:"/api-docs",element:V.jsx(Ne,{user:s,onLogout:r,onLogin:a})})]})}K.createRoot(document.getElementById("root")).render(V.jsx(r.StrictMode,{children:V.jsx(o,{children:V.jsx(Se,{})})}));
